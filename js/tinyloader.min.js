/*! TinyLoader v0.1.2 | (c) 2013 Nick Herro | This content is released under the MIT License. */
function TinyLoader(a){function f(b){a&&console.log("checking dependencies for "+b);var h,i;if(null!==c[b].deps&&c[b].deps.length)for(h in c[b].deps)if(i=c[b].deps[h],!c[i].loaded)return a&&console.log(i+" is not loaded yet.  checking again in "+d+"ms"),e>c[b].checked?(setTimeout(function(){f(b)},d),c[b].checked++,void 0):(alert("Failed to load dependencies for "+b),void 0);g(b)}function g(b){for(a&&console.log("processing queue for "+b);c[b].queue.length>0;)c[b].queue.shift().call()}function h(b){a&&console.log(b+" is loaded"),c[b].loaded=!0,f(b)}function i(a){b.target.appendChild(a)}if(arguments.callee._tinyLoaderInstance)return arguments.callee._tinyLoaderInstance;arguments.callee._tinyLoaderInstance=this;var b=this;a=a||!1;var c={},d=100,e=70;this.target=document.getElementsByTagName("head")[0],this.addScript=function(b){if(b.loaded===!0)c[b.url]={deps:b.deps||null,loaded:!0,queue:[b.callback]},a&&console.log(b.url+" is already loaded"),f(b.url);else{a&&console.log("\nloading "+b.url);var d=document.createElement("script");d.type="text/javascript",d.src=b.url,b.callback&&(c[b.url]?c[b.url].loaded?f(b.url):c[b.url].queue.push(b.callback):c[b.url]={deps:b.deps||null,checked:0,loaded:!1,queue:[b.callback]},d.addEventListener?d.addEventListener("load",function(){h(b.url)},!1):d.attachEvent&&d.attachEvent("onreadystatechange",function(){("loaded"===d.readyState||"complete"===d.readyState)&&h(d.src)})),i(d)}}}
